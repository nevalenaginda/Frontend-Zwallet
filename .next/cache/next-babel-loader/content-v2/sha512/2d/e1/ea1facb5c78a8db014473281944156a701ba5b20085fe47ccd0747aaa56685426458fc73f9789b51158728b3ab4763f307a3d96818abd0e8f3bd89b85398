{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Swal from \"sweetalert2\";\nimport { updateUser } from \"../../configs/redux/actions/user\";\n\nfunction Profile({\n  className\n}) {\n  const dispatch = useDispatch();\n  const urlImg = process.env.NEXT_PUBLIC_URL_IMAGE_NO_SLASH;\n  const {\n    user\n  } = useSelector(state => state.user);\n  const {\n    0: dataUser,\n    1: setDataUser\n  } = useState(user);\n  const imageRef = useRef(null);\n  const {\n    0: imgUrl,\n    1: setImgUrl\n  } = useState(`${urlImg}/images/${user.image}`);\n  const {\n    0: dataImage,\n    1: setDataImage\n  } = useState({\n    image: null\n  });\n\n  const handleChangeImage = event => {\n    const imgFiles = event.target.files[0];\n    setImgUrl(URL.createObjectURL(event.target.files[0]));\n    setDataImage({\n      image: imgFiles\n    });\n  };\n\n  const handleFormChange = event => {\n    const dataNew = _objectSpread({}, dataUser);\n\n    dataNew[event.target.name] = event.target.value;\n    setDataUser(dataNew);\n    console.log(dataUser);\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    const formData = new FormData();\n    formData.append(\"name\", dataUser.name);\n    formData.append(\"phone\", dataUser.phone);\n\n    if (dataImage.image !== null) {\n      formData.append(\"image\", dataImage.image);\n    }\n\n    dispatch(updateUser(formData, user.id)).then(res => {\n      Swal.fire({\n        icon: \"success\",\n        title: res.data.message,\n        showConfirmButton: false,\n        timer: 1500\n      });\n    }).catch(err => {\n      console.log(err);\n      Swal.fire({\n        icon: \"error\",\n        title: err.response.data.message,\n        showConfirmButton: false,\n        timer: 1500\n      });\n    });\n  };\n\n  useEffect(() => {\n    setDataUser(user);\n    setImgUrl(`${urlImg}/images/${user.image}`);\n  }, [user]);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"jsx-532506091\" + \" \" + (className || \"\"),\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"jsx-532506091\" + \" \" + \"card border-0 shadow\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"jsx-532506091\" + \" \" + \"card-body\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-532506091\" + \" \" + \"py-3\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-532506091\" + \" \" + \"container d-flex justify-content-center mb-2\",\n            children: dataUser.image ? /*#__PURE__*/_jsx(\"img\", {\n              src: `${urlImg}/images/${dataUser.image}`,\n              alt: \"\",\n              className: \"jsx-532506091\" + \" \" + \"img-people\"\n            }) : /*#__PURE__*/_jsx(\"img\", {\n              src: require(\"../../assets/images/default-user.svg\"),\n              alt: \"\",\n              className: \"jsx-532506091\" + \" \" + \"img-people\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            \"data-toggle\": \"modal\",\n            \"data-target\": \"#exampleModal\",\n            className: \"jsx-532506091\" + \" \" + \"text-center mb-2\",\n            children: /*#__PURE__*/_jsxs(\"span\", {\n              className: \"jsx-532506091\" + \" \" + \"text-muted pointer\",\n              children: [/*#__PURE__*/_jsx(\"i\", {\n                className: \"jsx-532506091\" + \" \" + \"fas fa-pencil-alt\"\n              }), \" Edit\"]\n            })\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-532506091\" + \" \" + \"container text-center\",\n            children: [dataUser.name ? /*#__PURE__*/_jsx(\"h4\", {\n              className: \"jsx-532506091\" + \" \" + \"font-weight-bold\",\n              children: dataUser.name\n            }) : /*#__PURE__*/_jsx(\"h4\", {\n              className: \"jsx-532506091\" + \" \" + \"font-weight-bold\"\n            }), dataUser.phone ? /*#__PURE__*/_jsx(\"p\", {\n              className: \"jsx-532506091\" + \" \" + \"text-muted m-0\",\n              children: dataUser.phone\n            }) : /*#__PURE__*/_jsx(\"p\", {\n              className: \"jsx-532506091\" + \" \" + \"text-muted m-0\"\n            })]\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      id: \"exampleModal\",\n      \"aria-labelledby\": \"exampleModalLabel\",\n      \"aria-hidden\": \"true\",\n      className: \"jsx-532506091\" + \" \" + \"modal fade\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        role: \"document\",\n        className: \"jsx-532506091\" + \" \" + \"modal-dialog modal-dialog-centered\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-532506091\" + \" \" + \"modal-content container p-3\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-532506091\" + \" \" + \"modal-header\",\n            children: [/*#__PURE__*/_jsx(\"h5\", {\n              id: \"exampleModalLongTitle\",\n              className: \"jsx-532506091\" + \" \" + \"modal-title\",\n              children: \"Edit your data\"\n            }), /*#__PURE__*/_jsx(\"button\", {\n              type: \"button\",\n              \"data-dismiss\": \"modal\",\n              \"aria-label\": \"Close\",\n              className: \"jsx-532506091\" + \" \" + \"close\",\n              children: /*#__PURE__*/_jsx(\"span\", {\n                \"aria-hidden\": \"true\",\n                className: \"jsx-532506091\",\n                children: \"\\xD7\"\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-532506091\" + \" \" + \"modal-body \",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"jsx-532506091\" + \" \" + \"row \",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"jsx-532506091\" + \" \" + \"col-12 mb-2 text-center\",\n                children: user.image && /*#__PURE__*/_jsx(\"img\", {\n                  src: imgUrl,\n                  alt: \"Profile\",\n                  className: \"jsx-532506091\" + \" \" + \"image-user \"\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"jsx-532506091\" + \" \" + \"col-12 text-center\",\n                children: /*#__PURE__*/_jsx(\"input\", {\n                  type: \"file\",\n                  name: \"image\",\n                  ref: imageRef,\n                  onChange: event => handleChangeImage(event),\n                  className: \"jsx-532506091\" + \" \" + \" my-2\"\n                })\n              })]\n            }), /*#__PURE__*/_jsxs(\"form\", {\n              onSubmit: handleSubmit,\n              className: \"jsx-532506091\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \"jsx-532506091\" + \" \" + \"form-group row\",\n                children: [/*#__PURE__*/_jsx(\"label\", {\n                  htmlFor: \"name\",\n                  className: \"jsx-532506091\" + \" \" + \"col col-form-label\",\n                  children: \"User Name\"\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"jsx-532506091\" + \" \" + \"col-8\",\n                  children: /*#__PURE__*/_jsx(\"input\", {\n                    type: \"text\",\n                    placeholder: \"Enter your user name\",\n                    value: dataUser.name,\n                    name: \"name\",\n                    onChange: handleFormChange,\n                    required: true,\n                    className: \"jsx-532506091\" + \" \" + \"form-control border-top-0 border-left-0 border-right-0 rounded-0\"\n                  })\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"jsx-532506091\" + \" \" + \"form-group row\",\n                children: [/*#__PURE__*/_jsx(\"label\", {\n                  htmlFor: \"email\",\n                  className: \"jsx-532506091\" + \" \" + \"col col-form-label\",\n                  children: \"Email\"\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"jsx-532506091\" + \" \" + \"col-8\",\n                  children: dataUser.email && /*#__PURE__*/_jsx(\"input\", {\n                    type: \"text\",\n                    placeholder: \"Enter your user name\",\n                    value: dataUser.email,\n                    name: \"email\",\n                    disabled: true,\n                    className: \"jsx-532506091\" + \" \" + \"form-control border-top-0 border-left-0 border-right-0 rounded-0\"\n                  })\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"jsx-532506091\" + \" \" + \"form-group row\",\n                children: [/*#__PURE__*/_jsx(\"label\", {\n                  htmlFor: \"phone\",\n                  className: \"jsx-532506091\" + \" \" + \"col col-form-label\",\n                  children: \"Phone Number\"\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"jsx-532506091\" + \" \" + \"col-8\",\n                  children: /*#__PURE__*/_jsx(\"input\", {\n                    type: \"text\",\n                    placeholder: \"Enter your user name\",\n                    value: dataUser.phone,\n                    name: \"phone\",\n                    onChange: handleFormChange,\n                    required: true,\n                    className: \"jsx-532506091\" + \" \" + \"form-control border-top-0 border-left-0 border-right-0 rounded-0\"\n                  })\n                })]\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-532506091\" + \" \" + \"modal-footer\",\n            children: [/*#__PURE__*/_jsx(\"button\", {\n              type: \"button\",\n              \"data-dismiss\": \"modal\",\n              className: \"jsx-532506091\" + \" \" + \"btn btn-gray radius-12\",\n              children: \"Cancel\"\n            }), /*#__PURE__*/_jsx(\"button\", {\n              type: \"button\",\n              \"data-dismiss\": \"modal\",\n              onClick: handleSubmit,\n              className: \"jsx-532506091\" + \" \" + \"btn btn-blue radius-12\",\n              children: \"Save changes\"\n            })]\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsx(_JSXStyle, {\n      id: \"532506091\",\n      children: [\".img-people.jsx-532506091{width:75px;height:75px;border-radius:12px;object-fit:cover;}\", \".image-user.jsx-532506091{height:15vh;width:10vh;object-fit:cover;border-radius:15px;}\", \"div.card.jsx-532506091{border-radius:15px;}\", \".btn-blue.jsx-532506091{background-color:#6379f4;color:white;}\", \".btn-blue.jsx-532506091:hover{background-color:#5365c9;color:white;}\"]\n    })]\n  });\n}\n\nexport default Profile;","map":null,"metadata":{},"sourceType":"module"}