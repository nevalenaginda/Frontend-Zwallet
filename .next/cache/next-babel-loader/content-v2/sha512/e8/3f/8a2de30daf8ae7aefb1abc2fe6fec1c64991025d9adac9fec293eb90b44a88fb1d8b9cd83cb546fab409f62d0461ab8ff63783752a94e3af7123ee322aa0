{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport { useRouter } from \"next/router\";\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getUser } from \"../../configs/redux/actions/user\";\nimport { getAllHistory } from \"../../configs/redux/actions/history\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Modal from \"@material-ui/core/Modal\";\nimport Swal from \"sweetalert2\";\nimport toRupiah from \"../../helpers/curencyToIDR\";\n\nfunction rand() {\n  return Math.round(Math.random() * 20) - 10;\n}\n\nfunction getModalStyle() {\n  const top = 50 + rand();\n  const left = 50 + rand();\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: \"absolute\",\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #ffff\",\n    borderRadius: \"12px\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  }\n}));\n\nfunction Balance() {\n  const dispatch = useDispatch();\n  const router = useRouter();\n  const {\n    user: dataUser\n  } = useSelector(state => state.user);\n  const {\n    0: dataBalance,\n    1: setBalance\n  } = useState(0);\n  const URLAPI = process.env.NEXT_PUBLIC_URL_API_WITH_SLASH;\n\n  const handleTopUp = event => {\n    event.preventDefault();\n\n    if (dataBalance < 5000) {\n      setOpen(false);\n      Swal.fire({\n        title: \"Info!\",\n        text: \"Minimum top up Rp5.000\",\n        icon: \"info\",\n        confirmButtonText: \"Ok\",\n        confirmButtonColor: \"#6379f4;\"\n      });\n    } else {\n      const data = {\n        amount: dataBalance\n      };\n      axios.post(`${URLAPI}topUp/${dataUser.id}`, data, {\n        withCredentials: true\n      }).then(res => {\n        dispatch(getUser());\n        dispatch(getAllHistory(dataUser.id));\n        setBalance(0);\n        setOpen(false);\n        Swal.fire({\n          icon: \"success\",\n          title: \"Top Up Success\",\n          showConfirmButton: false,\n          timer: 1500\n        });\n      }).catch(err => {\n        console.log(err);\n        setBalance(0);\n        setOpen(false);\n        Swal.fire({\n          icon: \"error\",\n          title: err.response.data.message,\n          showConfirmButton: false,\n          timer: 1500\n        });\n      });\n    }\n  }; // modal setup\n\n\n  const classes = useStyles(); // getModalStyle is not a pure function, we roll the style only on the first render\n\n  const [modalStyle] = React.useState(getModalStyle);\n  const [open, setOpen] = React.useState(false);\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    setBalance(0);\n  };\n\n  const body = /*#__PURE__*/_jsxs(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    children: [/*#__PURE__*/_jsx(\"h2\", {\n      id: \"simple-modal-title\",\n      className: \"text-center font-weight-bold\",\n      children: \"Top Up\"\n    }), /*#__PURE__*/_jsx(\"label\", {\n      for: \"form-balance\",\n      className: \"font-weight-bold  h4\",\n      children: \"Nominal\"\n    }), /*#__PURE__*/_jsxs(\"form\", {\n      onSubmit: handleTopUp,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"input-group-prepend\",\n          children: /*#__PURE__*/_jsx(\"span\", {\n            className: \"input-group-text font-weight-bold bg-white\",\n            children: \"Rp.\"\n          })\n        }), /*#__PURE__*/_jsx(\"input\", {\n          className: \"form-control\",\n          id: \"form-balance\",\n          type: \"number\",\n          value: dataBalance,\n          placeholder: dataUser.balance ? dataUser.balance : \"\",\n          onChange: e => setBalance(e.target.value),\n          required: true\n        })]\n      }), /*#__PURE__*/_jsx(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-block bt-blue radius-12 f-white mt-3\",\n        onClick: handleTopUp,\n        children: \"Top Up\"\n      }), /*#__PURE__*/_jsx(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-block btn-danger radius-12 f-white mt-3\",\n        onClick: handleClose,\n        children: \"Cancel\"\n      })]\n    })]\n  });\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"jsx-2149504162\",\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"jsx-2149504162\" + \" \" + `card border-0 shadow text-white blue card`,\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"jsx-2149504162\" + \" \" + \"card-body\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"jsx-2149504162\" + \" \" + \"container\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-2149504162\" + \" \" + \"d-flex justify-content-between\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"jsx-2149504162\",\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                className: \"jsx-2149504162\",\n                children: \"Balance\"\n              }), dataUser.balance ? /*#__PURE__*/_jsxs(\"h3\", {\n                className: \"jsx-2149504162\" + \" \" + \"font-weight-bold\",\n                children: [\"Rp\", toRupiah(dataUser.balance)]\n              }) : /*#__PURE__*/_jsx(\"h3\", {\n                className: \"jsx-2149504162\" + \" \" + \"font-weight-bold\"\n              }), dataUser.phone ? /*#__PURE__*/_jsx(\"p\", {\n                className: \"jsx-2149504162\" + \" \" + \"m-0\",\n                children: dataUser.phone\n              }) : /*#__PURE__*/_jsx(\"p\", {\n                className: \"jsx-2149504162\" + \" \" + \"m-0\"\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"jsx-2149504162\" + \" \" + \"d-none d-lg-flex\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"jsx-2149504162\" + \" \" + \"align-self-center\",\n                children: [/*#__PURE__*/_jsxs(\"button\", {\n                  onClick: e => router.push(\"/transfer\"),\n                  className: \"jsx-2149504162\" + \" \" + \"btn btn-block btn-outline-light\",\n                  children: [/*#__PURE__*/_jsx(\"i\", {\n                    className: \"jsx-2149504162\" + \" \" + \"fas fa-arrow-up  mr-2\"\n                  }), \" Transfer\"]\n                }), /*#__PURE__*/_jsxs(\"button\", {\n                  onClick: handleOpen,\n                  className: \"jsx-2149504162\" + \" \" + \"btn btn-block btn-outline-light\",\n                  children: [/*#__PURE__*/_jsx(\"i\", {\n                    className: \"jsx-2149504162\" + \" \" + \"fas fa-plus mr-2\"\n                  }), \" Top Up\"]\n                })]\n              })\n            })]\n          })\n        })\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"jsx-2149504162\" + \" \" + \"my-4 d-flex d-lg-none row\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"jsx-2149504162\" + \" \" + \"col\",\n        children: /*#__PURE__*/_jsx(\"button\", {\n          onClick: e => router.push(\"/transfer\"),\n          className: \"jsx-2149504162\" + \" \" + \" radius-12 btn btn-gray btn-block \",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-2149504162\" + \" \" + \"py-1 font-weight-bold\",\n            children: [/*#__PURE__*/_jsx(\"i\", {\n              className: \"jsx-2149504162\" + \" \" + \"fas fa-arrow-up  mr-2 text-blue\"\n            }), \"Transfer\"]\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"jsx-2149504162\" + \" \" + \"col\",\n        children: /*#__PURE__*/_jsx(\"button\", {\n          onClick: handleOpen,\n          className: \"jsx-2149504162\" + \" \" + \" radius-12 btn btn-gray btn-block \",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-2149504162\" + \" \" + \"py-1 font-weight-bold\",\n            children: [/*#__PURE__*/_jsx(\"i\", {\n              className: \"jsx-2149504162\" + \" \" + \"fas fa-plus mr-2 text-blue\"\n            }), \"Top Up\"]\n          })\n        })\n      })]\n    }), /*#__PURE__*/_jsx(Modal, {\n      open: open,\n      onClose: handleClose,\n      \"aria-labelledby\": \"simple-modal-title\",\n      \"aria-describedby\": \"simple-modal-description\",\n      children: body\n    }), /*#__PURE__*/_jsx(_JSXStyle, {\n      id: \"2149504162\",\n      children: [\".blue.jsx-2149504162{background:#6379f4;}\", \"div.card.jsx-2149504162{border-radius:15px;}\", \".font-title.jsx-2149504162{font-size:24px;}\", \".bt-blue.jsx-2149504162{background:#6379f4;}\", \".bt-blue.jsx-2149504162:hover{color:#fff;background:#425be7;}\", \".f-white.jsx-2149504162{color:#fff;}\"]\n    })]\n  });\n}\n\nexport default Balance;","map":null,"metadata":{},"sourceType":"module"}