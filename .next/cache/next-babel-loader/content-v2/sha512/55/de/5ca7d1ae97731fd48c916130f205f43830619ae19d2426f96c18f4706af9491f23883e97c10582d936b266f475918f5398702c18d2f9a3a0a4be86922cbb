{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState, useEffect } from \"react\";\nimport toRupiah from \"../../helpers/curencyToIDR\";\nimport axios from \"axios\"; // modal\n\nimport Moment from \"moment\";\nimport Swal from \"sweetalert2\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Modal from \"@material-ui/core/Modal\";\n\nfunction rand() {\n  return Math.round(Math.random() * 20) - 10;\n}\n\nfunction getModalStyle() {\n  const top = 50;\n  const left = 50;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: \"absolute\",\n    width: 400,\n    heigth: 500,\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  }\n})); // modal\n\nfunction HistoryAllTransaction() {\n  const {\n    0: dataAllUser,\n    1: setAllDataUser\n  } = useState({});\n  const {\n    0: message,\n    1: setMessage\n  } = useState(\"\");\n  const urlImg = process.env.NEXT_PUBLIC_URL_IMAGE_NO_SLASH;\n  const URLAPI = process.env.NEXT_PUBLIC_URL_API_WITH_SLASH;\n  let idUser, token;\n\n  if (false) {\n    idUser = localStorage.getItem(\"id\");\n    token = localStorage.getItem(\"token\");\n  }\n\n  const getData = () => {\n    axios.get(`${URLAPI}history/${idUser}?&sort=desc`, {\n      headers: {\n        token\n      }\n    }).then(res => {\n      console.log(res.data);\n      setAllDataUser(res.data);\n      setMessage(res.data.message);\n    }).catch(err => {\n      console.log(err);\n      setMessage(err.response.data.message);\n      setAllDataUser({});\n    });\n  };\n\n  useEffect(() => {\n    getData();\n  }, []); // modal\n\n  const {\n    0: detailHistory,\n    1: setDetailHistory\n  } = useState({});\n  const classes = useStyles();\n  const [modalStyle] = React.useState(getModalStyle);\n  const [open, setOpen] = React.useState(false);\n\n  const handleOpen = data => {\n    setDetailHistory(data);\n    console.log(\"ini\", data);\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const btaccept = id => {\n    const data = {\n      id,\n      token\n    };\n    setOpen(false);\n    axios.post(`${URLAPI}transferSuccess/${id}`, data, {\n      headers: {\n        token\n      }\n    }).then(response => {\n      setOpen(false);\n      getData();\n      Swal.fire({\n        icon: \"success\",\n        title: response.data.message,\n        showConfirmButton: false,\n        timer: 1500\n      });\n    }).catch(err => {\n      Swal.fire({\n        icon: \"error\",\n        title: \"Failed\",\n        showConfirmButton: false,\n        timer: 1500\n      });\n    });\n  };\n\n  const btcancelUser = id => {\n    const data = {\n      id,\n      token\n    };\n    setOpen(false);\n    axios.post(`${URLAPI}transferCancel/${id}`, data, {\n      headers: {\n        token\n      }\n    }).then(response => {\n      getData();\n      Swal.fire({\n        icon: \"success\",\n        title: response.data.message,\n        showConfirmButton: false,\n        timer: 1500\n      });\n    }).catch(err => {\n      console.log(err);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Failed\",\n        showConfirmButton: false,\n        timer: 1500\n      });\n    });\n  };\n\n  const btcancelTarget = id => {\n    const data = {\n      id,\n      token\n    };\n    setOpen(false);\n    axios.post(`${URLAPI}transferCancel/${id}`, data, {\n      headers: {\n        token\n      }\n    }).then(response => {\n      getData();\n      Swal.fire({\n        icon: \"success\",\n        title: response.data.message,\n        showConfirmButton: false,\n        timer: 1500\n      });\n    }).catch(err => {\n      console.log(err);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Failed\",\n        showConfirmButton: false,\n        timer: 1500\n      });\n    });\n  };\n\n  const changeTime = time => {\n    return Moment(time).format(\"MMMM DD, YYYY - HH.mm\");\n  }; // end modal\n\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"jsx-940930211\" + \" \" + \"card card-lg h-on-lg border-0 shadow\",\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"jsx-940930211\" + \" \" + \"card-body p-0 p-lg-4\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"jsx-940930211\" + \" \" + \"container h-100 d-flex flex-column\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-940930211\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-940930211\" + \" \" + \"d-none d-lg-block\",\n            children: /*#__PURE__*/_jsx(\"h5\", {\n              className: \"jsx-940930211\" + \" \" + \"font-weight-bold\",\n              children: \"Transaction History\"\n            })\n          }), /*#__PURE__*/_jsx(\"h6\", {\n            className: \"jsx-940930211\" + \" \" + \"font-weight-bold text-muted mb-3\",\n            children: \"This Week\"\n          })]\n        }), message !== \"Data unavailable\" ? /*#__PURE__*/_jsx(\"div\", {\n          className: \"jsx-940930211\" + \" \" + \"pembungkus looping h-content overflow-auto\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-940930211\" + \" \" + \"text-decoration-none text-dark \",\n            children: dataAllUser.data ? dataAllUser.data.map((itm, idx) => {\n              return /*#__PURE__*/_jsx(\"div\", {\n                onClick: event => handleOpen(itm),\n                className: \"jsx-940930211\" + \" \" + \"card shadow border-0 mb-3 pointer\",\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: \"jsx-940930211\" + \" \" + \"card-body h-100\",\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    className: \"jsx-940930211\" + \" \" + \"d-flex\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"jsx-940930211\" + \" \" + \"row align-self-center w-100\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"jsx-940930211\" + \" \" + \"col-4 col-sm-3 col-md-2 imgCenter d-flex justify-content-center\",\n                        children: itm.to_id !== idUser ? /*#__PURE__*/_jsx(\"img\", {\n                          src: `${urlImg}/images/${itm.to_image}`,\n                          className: \"jsx-940930211\" + \" \" + \"imgCenter\"\n                        }) : /*#__PURE__*/_jsx(\"img\", {\n                          src: `${urlImg}/images/${itm.from_image}`,\n                          className: \"jsx-940930211\" + \" \" + \"imgCenter\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"jsx-940930211\" + \" \" + \"col d-flex\",\n                        children: /*#__PURE__*/_jsx(\"div\", {\n                          className: \"jsx-940930211\" + \" \" + \"align-self-center w-100\",\n                          children: /*#__PURE__*/_jsxs(\"div\", {\n                            className: \"jsx-940930211\" + \" \" + \"d-flex justify-content-between\",\n                            children: [/*#__PURE__*/_jsxs(\"div\", {\n                              className: \"jsx-940930211\",\n                              children: [itm.to_id !== idUser ? /*#__PURE__*/_jsx(\"h5\", {\n                                className: \"jsx-940930211\" + \" \" + \"font-weight-bold m-0\",\n                                children: itm.to_name\n                              }) : /*#__PURE__*/_jsx(\"h5\", {\n                                className: \"jsx-940930211\" + \" \" + \"font-weight-bold m-0\",\n                                children: itm.from_name\n                              }), itm.status === 1 ? /*#__PURE__*/_jsx(\"p\", {\n                                className: \"jsx-940930211\" + \" \" + \"text-muted m-0\",\n                                children: \"Pending\"\n                              }) : itm.status === 2 ? /*#__PURE__*/_jsx(\"p\", {\n                                className: \"jsx-940930211\" + \" \" + \"text-muted m-0\",\n                                children: \"Transfer\"\n                              }) : itm.status === 3 ? /*#__PURE__*/_jsx(\"p\", {\n                                className: \"jsx-940930211\" + \" \" + \"text-muted m-0\",\n                                children: \"Cancel\"\n                              }) : /*#__PURE__*/_jsx(\"p\", {\n                                className: \"jsx-940930211\" + \" \" + \"text-muted m-0\",\n                                children: \"Top Up\"\n                              })]\n                            }), /*#__PURE__*/_jsx(\"div\", {\n                              className: \"jsx-940930211\",\n                              children: itm.status === 1 ? /*#__PURE__*/_jsxs(\"h5\", {\n                                className: \"jsx-940930211\" + \" \" + \"font-weight-bold c-pending\",\n                                children: [\"Rp\", toRupiah(itm.amount)]\n                              }) : itm.status === 2 && itm.to_id !== idUser ? /*#__PURE__*/_jsxs(\"h5\", {\n                                className: \"jsx-940930211\" + \" \" + \"font-weight-bold c-transfer\",\n                                children: [\"-Rp\", toRupiah(itm.amount)]\n                              }) : itm.status === 2 ? /*#__PURE__*/_jsxs(\"h5\", {\n                                className: \"jsx-940930211\" + \" \" + \"font-weight-bold text-success\",\n                                children: [\"+Rp\", toRupiah(itm.amount)]\n                              }) : itm.status === 3 ? /*#__PURE__*/_jsxs(\"h5\", {\n                                className: \"jsx-940930211\" + \" \" + \"font-weight-bold c-cancel\",\n                                children: [\"Rp\", toRupiah(itm.amount)]\n                              }) : /*#__PURE__*/_jsxs(\"h5\", {\n                                className: \"jsx-940930211\" + \" \" + \"font-weight-bold c-topup\",\n                                children: [\"+Rp\", toRupiah(itm.amount)]\n                              })\n                            })]\n                          })\n                        })\n                      })]\n                    })\n                  })\n                })\n              }, idx);\n            }) : \"\"\n          })\n        }) : /*#__PURE__*/_jsx(\"div\", {\n          className: \"jsx-940930211\" + \" \" + \"h-100 d-flex\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-940930211\" + \" \" + \"align-self-center w-100 text-center\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"jsx-940930211\",\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: require(\"../../assets/images/notransaction.png\"),\n                alt: \"\",\n                className: \"jsx-940930211\"\n              }), /*#__PURE__*/_jsx(\"h4\", {\n                className: \"jsx-940930211\" + \" \" + \"font-weight-bold my-3\",\n                children: \"It's Clear!\"\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \"jsx-940930211\" + \" \" + \"text-muted\",\n                children: \"You've never done a transaction so far\"\n              })]\n            })\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsx(Modal, {\n      open: open,\n      onClose: handleClose,\n      \"aria-labelledby\": \"simple-modal-title\",\n      \"aria-describedby\": \"simple-modal-description\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        style: modalStyle,\n        className: \"jsx-940930211\" + \" \" + (classes.paper || \"\"),\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-940930211\" + \" \" + \"row\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-940930211\" + \" \" + \"col-4\",\n            children: detailHistory.to_id !== idUser ? /*#__PURE__*/_jsx(\"img\", {\n              src: `${urlImg}/images/${detailHistory.to_image}`,\n              className: \"jsx-940930211\" + \" \" + \"imageHistory\"\n            }) : /*#__PURE__*/_jsx(\"img\", {\n              src: `${urlImg}/images/${detailHistory.from_image}`,\n              className: \"jsx-940930211\" + \" \" + \"imageHistory\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-940930211\" + \" \" + \"col d-flex\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"jsx-940930211\" + \" \" + \"align-self-center\",\n              children: [detailHistory.to_id !== idUser ? /*#__PURE__*/_jsx(\"h5\", {\n                className: \"jsx-940930211\" + \" \" + \"font-weight-bold\",\n                children: detailHistory.to_name\n              }) : /*#__PURE__*/_jsx(\"h5\", {\n                className: \"jsx-940930211\" + \" \" + \"font-weight-bold\",\n                children: detailHistory.from_name\n              }), detailHistory.to_id !== idUser ? /*#__PURE__*/_jsx(\"p\", {\n                className: \"jsx-940930211\" + \" \" + \"text-muted m-0\",\n                children: detailHistory.to_phone\n              }) : /*#__PURE__*/_jsx(\"p\", {\n                className: \"jsx-940930211\" + \" \" + \"text-muted m-0\",\n                children: detailHistory.from_phone\n              })]\n            })\n          })]\n        }), /*#__PURE__*/_jsx(\"hr\", {\n          className: \"jsx-940930211\"\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-940930211\" + \" \" + \"container\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-940930211\" + \" \" + \"d-flex justify-content-between mb-2\",\n            children: [/*#__PURE__*/_jsx(\"h6\", {\n              className: \"jsx-940930211\" + \" \" + \"m-0\",\n              children: \"Amount\"\n            }), detailHistory.status === 1 ? /*#__PURE__*/_jsxs(\"h6\", {\n              className: \"jsx-940930211\" + \" \" + \"m-0 c-pending font-weight-bold\",\n              children: [\"+Rp\", toRupiah(detailHistory.amount)]\n            }) : detailHistory.status === 2 && detailHistory.to_id !== idUser ? /*#__PURE__*/_jsxs(\"h6\", {\n              className: \"jsx-940930211\" + \" \" + \"m-0 c-transfer font-weight-bold\",\n              children: [\"-Rp\", toRupiah(detailHistory.amount)]\n            }) : detailHistory.status === 2 ? /*#__PURE__*/_jsxs(\"h6\", {\n              className: \"jsx-940930211\" + \" \" + \"m-0 text-success font-weight-bold\",\n              children: [\"+Rp\", toRupiah(detailHistory.amount)]\n            }) : detailHistory.status === 3 ? /*#__PURE__*/_jsxs(\"h6\", {\n              className: \"jsx-940930211\" + \" \" + \"m-0 c-cancel font-weight-bold\",\n              children: [\"Rp\", toRupiah(detailHistory.amount)]\n            }) : /*#__PURE__*/_jsxs(\"h6\", {\n              className: \"jsx-940930211\" + \" \" + \"m-0 c-topup font-weight-bold\",\n              children: [\"+Rp\", toRupiah(detailHistory.amount)]\n            })]\n          }), /*#__PURE__*/_jsx(\"hr\", {\n            className: \"jsx-940930211\"\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-940930211\" + \" \" + \"d-flex justify-content-between mb-2\",\n            children: [/*#__PURE__*/_jsx(\"h6\", {\n              className: \"jsx-940930211\" + \" \" + \"m-0\",\n              children: \"Date & Time\"\n            }), /*#__PURE__*/_jsx(\"h6\", {\n              className: \"jsx-940930211\" + \" \" + \"m-0\",\n              children: changeTime(detailHistory.created_at)\n            })]\n          }), /*#__PURE__*/_jsx(\"hr\", {\n            className: \"jsx-940930211\"\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-940930211\" + \" \" + \"mb-4\",\n            children: [/*#__PURE__*/_jsx(\"h6\", {\n              className: \"jsx-940930211\" + \" \" + \"m font-weight-bold\",\n              children: \"Notes :\"\n            }), /*#__PURE__*/_jsx(\"h6\", {\n              className: \"jsx-940930211\" + \" \" + \"m-0\",\n              children: detailHistory.notes\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-940930211\" + \" \" + \"mb-2\",\n            children: [detailHistory.status === 1 ? /*#__PURE__*/_jsx(\"h6\", {\n              className: \"jsx-940930211\" + \" \" + \"m font-weight-bold\",\n              children: \"Selection\"\n            }) : \"\", detailHistory.status === 1 && detailHistory.to_id === idUser ? /*#__PURE__*/_jsx(\"button\", {\n              onClick: e => btcancelTarget(detailHistory.id),\n              className: \"jsx-940930211\" + \" \" + \"btn btn-danger mr-2\",\n              children: \"Reject\"\n            }) : \"\", detailHistory.status === 1 && detailHistory.to_id === idUser ? /*#__PURE__*/_jsx(\"button\", {\n              onClick: e => btaccept(detailHistory.id),\n              className: \"jsx-940930211\" + \" \" + \"btn btn-success\",\n              children: \"Accept\"\n            }) : \"\", detailHistory.status === 1 && detailHistory.to_id !== idUser ? /*#__PURE__*/_jsx(\"button\", {\n              onClick: e => btcancelUser(detailHistory.id),\n              className: \"jsx-940930211\" + \" \" + \"btn btn-warning\",\n              children: \"Cancel\"\n            }) : \"\"]\n          })]\n        })]\n      })\n    }), /*#__PURE__*/_jsx(_JSXStyle, {\n      id: \"940930211\",\n      children: [\"@media screen and (max-width:992px){.card-lg.jsx-940930211{background-color:transparent !important;box-shadow:none !important;}}\", \".h-content.jsx-940930211{height:calc(90vh - 12rem);}\", \".imgCenter.jsx-940930211{object-fit:cover;border-radius:15px;height:60px;width:60px;}\", \"div.card.jsx-940930211{border-radius:15px;}\", \".c-transfer.jsx-940930211,.c-cancel.jsx-940930211{color:red;}\", \".c-pending.jsx-940930211{color:orange;}\", \".c-topup.jsx-940930211{color:#6379f4;}\", \".imageHistory.jsx-940930211{height:150px;width:100%;object-fit:cover;border-radius:15px;}\", \"@media screen and (min-width:992px){.h-on-lg.jsx-940930211{height:100%;}}\"]\n    })]\n  });\n}\n\nexport default HistoryAllTransaction;","map":null,"metadata":{},"sourceType":"module"}