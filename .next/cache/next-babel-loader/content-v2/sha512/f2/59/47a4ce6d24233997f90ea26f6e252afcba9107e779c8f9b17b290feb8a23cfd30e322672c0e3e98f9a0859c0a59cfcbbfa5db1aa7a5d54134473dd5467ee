{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport axios from \"axios\";\nimport { useRouter } from \"next/router\";\nimport Pagination from \"@material-ui/lab/Pagination\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useDispatch, useSelector } from \"react-redux\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    \"& > *\": {\n      marginTop: theme.spacing(2)\n    }\n  }\n}));\n\nfunction SearchReceiver() {\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const router = useRouter();\n  const {\n    transfer\n  } = useSelector(state => state.transfer);\n  const {\n    user\n  } = useSelector(state => state.user);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(true);\n  const {\n    0: message,\n    1: setMessage\n  } = useState(\"Data unavailable\");\n  const {\n    0: dataAllUser,\n    1: setAllDataUser\n  } = useState({});\n  const {\n    0: searchName,\n    1: setSearchName\n  } = useState(\"\");\n  let {\n    0: queryLimit,\n    1: setQueryLimit\n  } = useState(\"1\");\n  let {\n    0: queryPage,\n    1: setQueryPage\n  } = useState(\"1\");\n  let {\n    0: totalPage,\n    1: setTotalPage\n  } = useState(\"1\");\n  let {\n    0: queryOrder,\n    1: setQueryOrder\n  } = useState(\"asc\");\n  let {\n    0: queryParam,\n    1: setQueryParam\n  } = useState(\"name\");\n  const urlImg = process.env.NEXT_PUBLIC_URL_IMAGE_NO_SLASH;\n  const URLAPI = process.env.NEXT_PUBLIC_URL_API_WITH_SLASH;\n  let idUser;\n\n  if (false) {\n    idUser = localStorage.getItem(\"id\");\n  }\n\n  const param = [{\n    label: \"Name\",\n    value: \"name\"\n  }, {\n    label: \"Balance\",\n    value: \"balance\"\n  }, {\n    label: \"Phone Number\",\n    value: \"phone\"\n  }];\n  const order = [{\n    label: \"Ascending\",\n    value: \"asc\"\n  }, {\n    label: \"Descending\",\n    value: \"desc\"\n  }];\n  const limit = [{\n    label: \"Limit 1\",\n    value: \"1\"\n  }, {\n    label: \"Limit 4\",\n    value: \"4\"\n  }, {\n    label: \"Limit 8\",\n    value: \"8\"\n  }, {\n    label: \"Limit 12\",\n    value: \"12\"\n  }];\n\n  const handleClickCard = id => {\n    router.push({\n      pathname: \"/transfer/amount-and-note\",\n      scroll: false\n    });\n    dispatch({\n      type: \"INSERT_DATA_TRANSEFR\",\n      action: transfer.to_id = id\n    });\n  };\n\n  const handleChangePage = (item, i) => {\n    setQueryPage(i);\n  };\n\n  useEffect(() => {\n    setIsLoading(true);\n    setTimeout(() => {\n      if (searchName !== \"\") {\n        router.push({\n          pathname: \"/transfer\",\n          query: {\n            search: searchName,\n            param: queryParam,\n            sort: queryOrder,\n            page: queryPage,\n            limit: queryLimit\n          }\n        }, undefined, {\n          scroll: false\n        });\n      } else {\n        router.push({\n          pathname: \"/transfer\",\n          query: {\n            param: queryParam,\n            sort: queryOrder,\n            page: queryPage,\n            limit: queryLimit\n          },\n          scroll: false\n        }, undefined, {\n          scroll: false\n        });\n      }\n\n      axios.get(`${URLAPI}allUser/${idUser}?search=${searchName}&page=${queryPage}&limit=${queryLimit}&param=${queryParam}&sort=${queryOrder}`, {\n        withCredentials: true\n      }).then(res => {\n        console.log(res.data);\n        setAllDataUser(res.data);\n        setMessage(res.data.message);\n        setIsLoading(false);\n        setTotalPage(res.data.pagination.totalPage);\n      }).catch(err => {\n        console.log(err);\n        setMessage(err.response.data.message);\n        setAllDataUser({});\n        setIsLoading(false);\n        setTotalPage(1);\n        setQueryPage(1);\n      });\n    }, 500);\n  }, [searchName, queryLimit, queryOrder, queryParam, queryPage]);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"jsx-3803352166\",\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"jsx-3803352166\" + \" \" + \"h-100\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"jsx-3803352166\" + \" \" + \"container d-flex d-lg-none py-4\",\n        children: [/*#__PURE__*/_jsx(Link, {\n          href: \"/dashboard\",\n          children: /*#__PURE__*/_jsx(\"a\", {\n            className: \"jsx-3803352166\" + \" \" + \" text-dark mr-3 m-0 font-weight-bold align-self-center h5\",\n            children: /*#__PURE__*/_jsx(\"i\", {\n              className: \"jsx-3803352166\" + \" \" + \"fas fa-arrow-left\"\n            })\n          })\n        }), /*#__PURE__*/_jsx(\"h5\", {\n          className: \"jsx-3803352166\" + \" \" + \"m-0 align-self-center font-weight-bold\",\n          children: \"Find Receiver\"\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"jsx-3803352166\" + \" \" + \"card border-0 shadow\",\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-3803352166\" + \" \" + \"card-body\",\n          children: [/*#__PURE__*/_jsx(\"h5\", {\n            className: \"jsx-3803352166\" + \" \" + \"d-none d-lg-block font-weight-bold\",\n            children: \"Search Receiver\"\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-3803352166\" + \" \" + \"d-flex align-items-start flex-column\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"jsx-3803352166\" + \" \" + \"py-4 px-1 input-group\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"jsx-3803352166\" + \" \" + \"input-group-prepend\",\n                children: /*#__PURE__*/_jsx(\"span\", {\n                  className: \"jsx-3803352166\" + \" \" + \"input-group-text rounding border-0\",\n                  children: /*#__PURE__*/_jsx(\"i\", {\n                    className: \"jsx-3803352166\" + \" \" + \"fas fa-search\"\n                  })\n                })\n              }), /*#__PURE__*/_jsx(\"input\", {\n                type: \"text\",\n                placeholder: \"Search receiver here\",\n                value: searchName,\n                onChange: e => {\n                  setSearchName(e.target.value);\n                  setQueryPage(1);\n                },\n                className: \"jsx-3803352166\" + \" \" + \"form-control border-0 bg-gray rounding\"\n              })]\n            }), isLoading ? /*#__PURE__*/_jsx(\"div\", {\n              className: \"jsx-3803352166\" + \" \" + \"py-auto text-center w-100 h-content\",\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"jsx-3803352166\" + \" \" + \"align-self-center h-100\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"jsx-3803352166\" + \" \" + \"spinner-grow text-blue\",\n                  children: /*#__PURE__*/_jsx(\"span\", {\n                    className: \"jsx-3803352166\" + \" \" + \"sr-only\",\n                    children: \"Loading...\"\n                  })\n                }), /*#__PURE__*/_jsx(\"h3\", {\n                  className: \"jsx-3803352166\" + \" \" + \"font-weight-bold\",\n                  children: \"Wait a moment...\"\n                }), /*#__PURE__*/_jsx(\"p\", {\n                  className: \"jsx-3803352166\" + \" \" + \"text-muted m-0\",\n                  children: \"Loading process\"\n                })]\n              })\n            }) : /*#__PURE__*/_jsx(\"div\", {\n              className: \"jsx-3803352166\" + \" \" + \"w-100  h-content overflow-auto\",\n              children: message !== \"Data unavailable\" ? /*#__PURE__*/_jsx(\"div\", {\n                className: \"jsx-3803352166\" + \" \" + \"text-decoration-none text-dark\",\n                children: dataAllUser.data.map((itm, idx) => {\n                  return /*#__PURE__*/_jsx(\"div\", {\n                    onClick: e => handleClickCard(itm.id),\n                    className: \"jsx-3803352166\" + \" \" + \"container pointer\",\n                    children: /*#__PURE__*/_jsxs(\"div\", {\n                      className: \"jsx-3803352166\" + \" \" + \"row item mb-3\",\n                      children: [/*#__PURE__*/_jsx(\"div\", {\n                        className: \"jsx-3803352166\" + \" \" + \"col-4 col-md-3 col-lg-2\",\n                        children: itm.image ? /*#__PURE__*/_jsx(\"img\", {\n                          src: `${urlImg}/images/${itm.image}`,\n                          alt: \"#\",\n                          className: \"jsx-3803352166\" + \" \" + \" img-people\"\n                        }) : /*#__PURE__*/_jsx(\"img\", {\n                          src: require(\"../../assets/images/default-user.svg\"),\n                          alt: \"#\",\n                          className: \"jsx-3803352166\" + \" \" + \" img-people\"\n                        })\n                      }), /*#__PURE__*/_jsx(\"div\", {\n                        className: \"jsx-3803352166\" + \" \" + \"col d-flex\",\n                        children: /*#__PURE__*/_jsxs(\"div\", {\n                          className: \"jsx-3803352166\" + \" \" + \"align-self-center\",\n                          children: [itm.name ? /*#__PURE__*/_jsx(\"h5\", {\n                            className: \"jsx-3803352166\" + \" \" + \"font-weight-bold\",\n                            children: itm.name\n                          }) : /*#__PURE__*/_jsx(\"h5\", {\n                            className: \"jsx-3803352166\" + \" \" + \"font-weight-bold\"\n                          }), itm.phone ? /*#__PURE__*/_jsx(\"p\", {\n                            className: \"jsx-3803352166\" + \" \" + \"text-muted m-0\",\n                            children: itm.phone\n                          }) : /*#__PURE__*/_jsx(\"p\", {\n                            className: \"jsx-3803352166\" + \" \" + \"text-muted m-0\"\n                          })]\n                        })\n                      })]\n                    })\n                  }, idx);\n                })\n              }) : /*#__PURE__*/_jsx(\"div\", {\n                className: \"jsx-3803352166\",\n                children: /*#__PURE__*/_jsx(\"div\", {\n                  className: \"jsx-3803352166\" + \" \" + \"container\",\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"jsx-3803352166\" + \" \" + \"text-center mt-5\",\n                    children: [/*#__PURE__*/_jsx(\"img\", {\n                      src: require(\"../../assets/images/nodata.svg\"),\n                      alt: \"\",\n                      className: \"jsx-3803352166\" + \" \" + \"imageNodata mb-3\"\n                    }), /*#__PURE__*/_jsx(\"h3\", {\n                      className: \"jsx-3803352166\" + \" \" + \"font-weight-bold\",\n                      children: \"Oops...\"\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: \"jsx-3803352166\" + \" \" + \"text-muted\",\n                      children: \"the recipient you are looking for wasn't found\"\n                    })]\n                  })\n                })\n              })\n            })]\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"jsx-3803352166\" + \" \" + \"row mb-1 justify-content-center\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-3803352166\" + \" \" + (classes.root || \"\"),\n            children: /*#__PURE__*/_jsx(Pagination, {\n              page: parseInt(queryPage),\n              defaultPage: 1,\n              onChange: handleChangePage,\n              count: parseInt(totalPage),\n              variant: \"outlined\",\n              shape: \"rounded\"\n            })\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-3803352166\" + \" \" + \"row mt-2 mb-3 justify-content-center\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-3803352166\" + \" \" + \"col-3\",\n            children: /*#__PURE__*/_jsx(\"select\", {\n              onChange: event => setQueryParam(event.target.value),\n              className: \"jsx-3803352166\" + \" \" + \"w-100 custom-select font-weight-normal\",\n              children: param.map((item, index) => {\n                return /*#__PURE__*/_jsx(\"option\", {\n                  value: item.value,\n                  className: \"jsx-3803352166\",\n                  children: item.label\n                }, index);\n              })\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-3803352166\" + \" \" + \"col-3\",\n            children: /*#__PURE__*/_jsx(\"select\", {\n              onChange: event => {\n                setQueryOrder(event.target.value);\n              },\n              className: \"jsx-3803352166\" + \" \" + \"w-100 custom-select\",\n              children: order.map((item, index) => {\n                return /*#__PURE__*/_jsx(\"option\", {\n                  value: item.value,\n                  className: \"jsx-3803352166\",\n                  children: item.label\n                }, index);\n              })\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-3803352166\" + \" \" + \"col-3\",\n            children: /*#__PURE__*/_jsx(\"select\", {\n              onChange: event => {\n                setQueryLimit(event.target.value);\n              },\n              className: \"jsx-3803352166\" + \" \" + \"w-100 custom-select\",\n              children: limit.map((item, index) => {\n                return /*#__PURE__*/_jsx(\"option\", {\n                  value: item.value,\n                  className: \"jsx-3803352166\",\n                  children: item.label\n                }, index);\n              })\n            })\n          })]\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(_JSXStyle, {\n      id: \"3803352166\",\n      children: [\"@media screen and (max-width:992px){.shadow.jsx-3803352166{box-shadow:none !important;}.h-100.jsx-3803352166 .card-body.jsx-3803352166{padding:0% !important;}}\", \".imageNodata.jsx-3803352166{object-fit:cover;height:100px;width:100px;}\", \".h-content.jsx-3803352166{height:calc(80vh - 12rem);}\", \".img-people.jsx-3803352166{height:90px;width:90px;object-fit:cover;border-radius:12px;}\", \".item.jsx-3803352166{min-height:80px;margin-bottom:0.75rem;}\", \".rounding.jsx-3803352166{border-radius:12px;}\", \"div.card.jsx-3803352166{border-radius:15px;}\", \".bg-gray.jsx-3803352166{background-color:#ebecec;}\", \".bg-gray.jsx-3803352166:focus{background-color:#ebecec;}\", \"input.jsx-3803352166:focus{box-shadow:none;}\", \".f-normal.jsx-3803352166{font-size:25px;}\"]\n    })]\n  });\n}\n\nexport default SearchReceiver;","map":null,"metadata":{},"sourceType":"module"}