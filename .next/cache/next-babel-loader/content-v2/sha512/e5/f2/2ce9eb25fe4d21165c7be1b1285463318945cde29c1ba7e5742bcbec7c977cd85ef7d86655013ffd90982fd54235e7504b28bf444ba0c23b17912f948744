{"ast":null,"code":"import _defineProperty from \"D:/Tutorial Web/Week 10/Zwallet-Frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"D:/Tutorial Web/Week 10/Zwallet-Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/router\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport toRupiah from \"../../helpers/curencyToIDR\";\nimport Moment from \"moment\";\nimport PinInput from \"react-pin-input\";\nimport { checkPin } from \"../../configs/redux/actions/user\";\nimport { transferProcess } from \"../../configs/redux/actions/transfer\"; //modal\n\nimport Swal from \"sweetalert2\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Modal from \"@material-ui/core/Modal\";\n\nfunction rand() {\n  return Math.round(Math.random() * 20) - 10;\n}\n\nfunction getModalStyle() {\n  var top = 50;\n  var left = 50;\n  return {\n    top: \"\".concat(top, \"%\"),\n    left: \"\".concat(left, \"%\"),\n    transform: \"translate(-\".concat(top, \"%, -\").concat(left, \"%)\")\n  };\n}\n\nvar useStyles = makeStyles(function (theme) {\n  return {\n    paper: {\n      position: \"absolute\",\n      width: 400,\n      heigth: 500,\n      backgroundColor: theme.palette.background.paper,\n      border: \"2px solid #000\",\n      boxShadow: theme.shadows[5],\n      padding: theme.spacing(2, 4, 3)\n    }\n  };\n}); // modal\n\nfunction DetailTransfer() {\n  var _jsx2;\n\n  var router = useRouter();\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.transfer;\n  }),\n      transfer = _useSelector.transfer,\n      dataTarget = _useSelector.dataTarget;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.user;\n  }),\n      user = _useSelector2.user;\n\n  var urlImg = process.env.NEXT_PUBLIC_URL_IMAGE_NO_SLASH;\n\n  var nowTime = function nowTime() {\n    var dateTime = Moment().format(\"MMMM DD, YYYY - HH.mm\");\n    return dateTime;\n  }; // modal\n\n\n  var classes = useStyles();\n\n  var _React$useState = React.useState(getModalStyle),\n      _React$useState2 = _slicedToArray(_React$useState, 1),\n      modalStyle = _React$useState2[0];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      open = _React$useState4[0],\n      setOpen = _React$useState4[1];\n\n  var _useState = useState(\"\"),\n      loginPin = _useState[0],\n      setLoginPin = _useState[1]; // const handleOpen = (data) => {\n  //   setOpen(true);\n  // };\n\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  var handleContinue = function handleContinue() {\n    setOpen(true);\n  };\n\n  var handleLoginPin = function handleLoginPin(e) {\n    e.preventDefault();\n    dispatch(checkPin({\n      pin: loginPin\n    }, user.id)).then(function (res) {\n      setOpen(false);\n      dispatch(transferProcess(transfer)).then(function (res) {\n        dispatch({\n          type: \"TRANSFER_SUCCESS\"\n        });\n        Swal.fire({\n          title: \"Success!\",\n          text: \"Transfer Success\",\n          icon: \"success\",\n          showConfirmButton: false,\n          timer: 1500\n        });\n        router.push({\n          pathname: \"/transfer/history\"\n        });\n      })[\"catch\"](function (err) {\n        dispatch({\n          type: \"TRANSFER_FAILURE\",\n          payload: err.response.data.message\n        });\n        Swal.fire({\n          title: \"Error!\",\n          text: \"Transfer Failed\",\n          icon: \"error\",\n          showConfirmButton: false,\n          timer: 1500\n        });\n        router.push({\n          pathname: \"/transfer/history\"\n        });\n      });\n    })[\"catch\"](function (err) {\n      setOpen(false);\n      Swal.fire({\n        title: \"Error!\",\n        text: \"Login pin number failed. Please enter correct pin number.\",\n        icon: \"error\",\n        confirmButtonText: \"Ok\",\n        confirmButtonColor: \"#6379f4;\"\n      });\n    });\n  };\n\n  useEffect(function () {\n    if (!transfer.amount && !dataTarget.id) {\n      router.push(\"/dashboard\");\n    } else {\n      dispatch({\n        type: \"INSERT_DATA_TRANSFER\",\n        payload: transfer.dateTime = nowTime()\n      });\n    }\n  }, [dispatch]);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"jsx-168628897\" + \" \" + \"\",\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"jsx-168628897\" + \" \" + \"container d-flex d-lg-none py-4\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        onClick: function onClick() {\n          return router.back();\n        },\n        className: \"jsx-168628897\" + \" \" + \"text-dark mr-3\",\n        children: /*#__PURE__*/_jsx(\"h5\", {\n          className: \"jsx-168628897\" + \" \" + \"m-0 font-weight-bold align-self-center\",\n          children: /*#__PURE__*/_jsx(\"i\", {\n            className: \"jsx-168628897\" + \" \" + \"bi bi-arrow-left\"\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"h5\", {\n        className: \"jsx-168628897\" + \" \" + \"m-0 align-self-center font-weight-bold\",\n        children: \"Confirmation\"\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"jsx-168628897\" + \" \" + \"card border-0 card-lg shadow py-3\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"jsx-168628897\" + \" \" + \"card-body bodycard\",\n        children: [/*#__PURE__*/_jsx(\"h5\", {\n          className: \"jsx-168628897\" + \" \" + \"font-weight-bold\",\n          children: \"Transfer To\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"jsx-168628897\" + \" \" + \"card border-0 shadow mb-4\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"jsx-168628897\" + \" \" + \"card-body d-flex\",\n            children: [dataTarget.image && /*#__PURE__*/_jsx(\"img\", {\n              src: \"\".concat(urlImg, \"/images/\").concat(dataTarget.image),\n              alt: \"\",\n              className: \"jsx-168628897\" + \" \" + \"img-people mr-4\"\n            }), dataTarget.name && /*#__PURE__*/_jsxs(\"div\", {\n              className: \"jsx-168628897\" + \" \" + \"align-self-center\",\n              children: [/*#__PURE__*/_jsx(\"h5\", {\n                className: \"jsx-168628897\" + \" \" + \"font-weight-bold\",\n                children: dataTarget.name\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: \"jsx-168628897\" + \" \" + \"text-muted m-0\",\n                children: dataTarget.phone\n              })]\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"h5\", {\n          className: \"jsx-168628897\" + \" \" + \"font-weight-bold\",\n          children: \"Details\"\n        }), transfer.amount && /*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-168628897\" + \" \" + \"card card-body border-0 shadow mb-3\",\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: \"jsx-168628897\",\n            children: \"Amount\"\n          }), /*#__PURE__*/_jsxs(\"h5\", {\n            className: \"jsx-168628897\" + \" \" + \"m-0 font-weight-bold\",\n            children: [\"Rp \", toRupiah(transfer.amount)]\n          })]\n        }), transfer.balanceLeft && /*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-168628897\" + \" \" + \"card card-body border-0 mb-3 shadow\",\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: \"jsx-168628897\",\n            children: \"Balance Left\"\n          }), /*#__PURE__*/_jsxs(\"h5\", {\n            className: \"jsx-168628897\" + \" \" + \"m-0 font-weight-bold\",\n            children: [\"Rp \", toRupiah(transfer.balanceLeft)]\n          })]\n        }), transfer.dateTime && /*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-168628897\" + \" \" + \"card card-body mb-3 border-0 shadow\",\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: \"jsx-168628897\",\n            children: \"Date & Time\"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-168628897\" + \" \" + \"input-group\",\n            children: /*#__PURE__*/_jsx(\"h5\", {\n              className: \"jsx-168628897\" + \" \" + \"m-0 font-weight-bold\",\n              children: transfer.dateTime\n            })\n          })]\n        }), transfer.notes && /*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-168628897\" + \" \" + \"card card-body mb-5 border-0 shadow\",\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: \"jsx-168628897\",\n            children: \"Notes\"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-168628897\" + \" \" + \"input-group\",\n            children: /*#__PURE__*/_jsx(\"h5\", {\n              className: \"jsx-168628897\" + \" \" + \"m-0 font-weight-bold\",\n              children: transfer.notes\n            })\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-168628897\" + \" \" + \"d-flex justify-content-end\",\n          children: [/*#__PURE__*/_jsx(\"button\", {\n            onClick: handleContinue,\n            className: \"jsx-168628897\" + \" \" + \"btn btn-blue btn-lg radius-12 d-none d-lg-block\",\n            children: /*#__PURE__*/_jsx(\"small\", {\n              className: \"jsx-168628897\" + \" \" + \"p-3 font-weight-bold\",\n              children: \" Continue \"\n            })\n          }), /*#__PURE__*/_jsx(\"button\", {\n            onClick: handleContinue,\n            className: \"jsx-168628897\" + \" \" + \"btn btn-blue btn-lg radius-12 btn-block d-lg-none d-block\",\n            children: /*#__PURE__*/_jsx(\"small\", {\n              className: \"jsx-168628897\" + \" \" + \"p-3 font-weight-bold\",\n              children: \" Continue \"\n            })\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(Modal, {\n        open: open,\n        onClose: handleClose,\n        \"aria-labelledby\": \"simple-modal-title\",\n        \"aria-describedby\": \"simple-modal-description\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          style: modalStyle,\n          className: \"jsx-168628897\" + \" \" + (classes.paper || \"\"),\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-168628897\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"jsx-168628897\" + \" \" + \"p-3\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"jsx-168628897\" + \" \" + \"d-flex justify-content-between\",\n                children: /*#__PURE__*/_jsx(\"h5\", {\n                  className: \"jsx-168628897\" + \" \" + \"m-0 font-weight-bold\",\n                  children: \"Enter PIN to Transfer\"\n                })\n              }), /*#__PURE__*/_jsxs(\"p\", {\n                className: \"jsx-168628897\" + \" \" + \"my-4 text-muted\",\n                children: [\"Enter your 6 digits PIN for confirmation to\", /*#__PURE__*/_jsx(\"br\", {\n                  className: \"jsx-168628897\"\n                }), \"continue transferring money.\"]\n              }), /*#__PURE__*/_jsxs(\"form\", {\n                className: \"jsx-168628897\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"jsx-168628897\" + \" \" + \"w-100 d-flex justify-content-center mb-3\",\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    className: \"jsx-168628897\" + \" \" + \"row text-center\",\n                    children: /*#__PURE__*/_jsx(PinInput, {\n                      length: 6,\n                      focus: true,\n                      secret: true,\n                      initialValue: \"\",\n                      inputStyle: {\n                        border: \"1px solid rgba(169, 169, 169, 0.6)\",\n                        borderRadius: \"10px\",\n                        width: \"10%\",\n                        minWidth: \"30px\"\n                      },\n                      inputFocusStyle: {\n                        borderColor: \" #6379f4\"\n                      },\n                      type: \"numeric\",\n                      onChange: function onChange(value) {\n                        return setLoginPin(value);\n                      }\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"jsx-168628897\" + \" \" + \"d-flex justify-content-end\",\n                  children: /*#__PURE__*/_jsx(\"button\", (_jsx2 = {\n                    type: \"submit\",\n                    onClick: handleLoginPin,\n                    disabled: loginPin.length < 6\n                  }, _defineProperty(_jsx2, \"type\", \"submit\"), _defineProperty(_jsx2, \"className\", \"jsx-168628897\" + \" \" + \"btn btn-block btn-lg radius-12 btn-blue\"), _defineProperty(_jsx2, \"children\", \"Continue\"), _jsx2))\n                })]\n              })]\n            })\n          })\n        })\n      })]\n    }), /*#__PURE__*/_jsx(_JSXStyle, {\n      id: \"168628897\",\n      children: [\"@media screen and (max-width:992px){.card-lg.jsx-168628897{box-shadow:none !important;}.card-lg.jsx-168628897 .bodycard.jsx-168628897{padding:0 !important;}}\", \".btn-blue.jsx-168628897{background-color:#6379f4;color:white;}\", \".btn-blue.jsx-168628897:hover{background-color:#5265cf;color:white;}\", \".btn-blue.jsx-168628897:disabled{background-color:#dadada;color:#88888f;}\", \".btn-blue.jsx-168628897:disabled.jsx-168628897:hover{background-color:#dadada;color:#88888f;}\", \".img-people.jsx-168628897{width:100px;height:100px;border-radius:12px;object-fit:cover;}\", \"div.card.jsx-168628897{border-radius:15px;}\", \".bg-gray.jsx-168628897{background-color:#ebecec;}\", \".bg-gray.jsx-168628897:focus{background-color:#ebecec;}\", \"input.jsx-168628897:focus{box-shadow:none;}\", \".btn-blue.jsx-168628897{background-color:#6379f4;color:white;}\", \".btn-blue.jsx-168628897:hover{background-color:#5365c9;color:white;}\"]\n    })]\n  });\n}\n\nexport default DetailTransfer;","map":null,"metadata":{},"sourceType":"module"}