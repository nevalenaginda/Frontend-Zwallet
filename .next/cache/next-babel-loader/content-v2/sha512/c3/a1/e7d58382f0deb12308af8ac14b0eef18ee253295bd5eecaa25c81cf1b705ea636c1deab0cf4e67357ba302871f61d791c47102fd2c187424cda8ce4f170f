{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState } from \"react\";\nimport PinInput from \"react-pin-input\";\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport { useRouter } from \"next/router\";\n\nfunction CardChangePin() {\n  const router = useRouter();\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: pinCorrect,\n    1: setPinCorret\n  } = useState(false);\n  const {\n    0: loginPin,\n    1: setLoginPin\n  } = useState(\"\");\n  const {\n    0: newPin,\n    1: setNewPin\n  } = useState(\"\");\n  const URLAPI = process.env.NEXT_PUBLIC_URL_API_WITH_SLASH;\n  let idUser, token;\n\n  if (false) {\n    idUser = localStorage.getItem(\"id\");\n    token = localStorage.getItem(\"token\");\n  }\n\n  const handleLoginPin = e => {\n    e.preventDefault();\n    setIsLoading(true);\n    axios.post(`${URLAPI}loginPIN/${idUser}`, {\n      pin: loginPin\n    }, {\n      withCredentials: true\n    }).then(res => {\n      setIsLoading(false);\n      setPinCorret(true);\n      Swal.fire({\n        title: \"Success!\",\n        text: res.data.message,\n        icon: \"success\",\n        showConfirmButton: false,\n        timer: 1500\n      });\n    }).catch(err => {\n      setIsLoading(false);\n      setPinCorret(false);\n      Swal.fire({\n        title: \"Error!\",\n        text: err.response.data.message,\n        icon: \"error\",\n        showConfirmButton: false,\n        timer: 1500\n      });\n    });\n  };\n\n  const handleNewPin = e => {\n    e.preventDefault();\n    setIsLoading(true);\n    axios.patch(`${URLAPI}user/${idUser}`, {\n      pin: newPin\n    }, {\n      withCredentials: true\n    }).then(res => {\n      setIsLoading(false);\n      router.push(\"/profile\");\n      setPinCorret(false);\n      Swal.fire({\n        title: \"Success!\",\n        text: \"Change pin success.\",\n        icon: \"success\",\n        showConfirmButton: false,\n        timer: 2000\n      });\n    }).catch(err => {\n      setIsLoading(false);\n      setPinCorret(true);\n      Swal.fire({\n        title: \"Error!\",\n        text: \"Change pin failed\",\n        icon: \"error\",\n        showConfirmButton: false,\n        timer: 2000\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"jsx-1023167557\" + \" \" + \"card shadow border-0 radius-12 h-100\",\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"jsx-1023167557\" + \" \" + \"card-body\",\n      children: isLoading ? /*#__PURE__*/_jsx(\"div\", {\n        className: \"jsx-1023167557\" + \" \" + \"d-flex justify-content-center h-100\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-1023167557\" + \" \" + \"align-self-center text-center\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            role: \"status\",\n            className: \"jsx-1023167557\" + \" \" + \"spinner-grow text-blue mb-3\",\n            children: /*#__PURE__*/_jsx(\"span\", {\n              className: \"jsx-1023167557\" + \" \" + \"sr-only\",\n              children: \"Loading...\"\n            })\n          }), /*#__PURE__*/_jsx(\"h4\", {\n            className: \"jsx-1023167557\" + \" \" + \"font-weight-bold text-muted\",\n            children: \"Please wait...\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: \"jsx-1023167557\" + \" \" + \"text-muted\",\n            children: \"We're igniting the process\"\n          })]\n        })\n      }) : /*#__PURE__*/_jsxs(\"div\", {\n        className: \"jsx-1023167557\" + \" \" + \"h-100\",\n        children: [\" \", pinCorrect ? /*#__PURE__*/_jsxs(\"div\", {\n          \"v-else\": true,\n          className: \"jsx-1023167557\" + \" \" + \"h-100\",\n          children: [/*#__PURE__*/_jsx(\"h5\", {\n            className: \"jsx-1023167557\" + \" \" + \"font-weight-bold text-secondary mb-3\",\n            children: \"Change PIN\"\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            className: \"jsx-1023167557\" + \" \" + \"text-muted\",\n            children: [\"Type your 6 digits security PIN to use in \", /*#__PURE__*/_jsx(\"br\", {\n              className: \"jsx-1023167557\"\n            }), \"Zwallet.\"]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-1023167557\" + \" \" + \"my-auto\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"jsx-1023167557\" + \" \" + \"row d-flex justify-content-center text-center\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"jsx-1023167557\" + \" \" + \"col-md-8\",\n                children: /*#__PURE__*/_jsx(\"form\", {\n                  className: \"jsx-1023167557\",\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"jsx-1023167557\" + \" \" + \"px-5\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"jsx-1023167557\" + \" \" + \"pt-4 input-wrapper\",\n                      children: /*#__PURE__*/_jsx(PinInput, {\n                        length: 6,\n                        focus: true,\n                        secret: true,\n                        initialValue: \"\",\n                        inputStyle: {\n                          border: \"1px solid rgba(169, 169, 169, 0.6)\",\n                          borderRadius: \"10px\",\n                          width: \"10%\",\n                          minWidth: \"30px\"\n                        },\n                        inputFocusStyle: {\n                          borderColor: \" #6379f4\"\n                        },\n                        type: \"numeric\",\n                        onChange: value => setNewPin(value)\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"jsx-1023167557\" + \" \" + \"pt-5\",\n                      children: /*#__PURE__*/_jsx(\"button\", {\n                        onClick: handleNewPin,\n                        disabled: newPin.length < 6,\n                        type: \"submit\",\n                        className: \"jsx-1023167557\" + \" \" + \"btn btn-block btn-lg radius-12 btn-blue\",\n                        children: \"Change Pin\"\n                      })\n                    })]\n                  })\n                })\n              })\n            })\n          })]\n        }) : /*#__PURE__*/_jsxs(\"div\", {\n          \"v-else\": true,\n          className: \"jsx-1023167557\" + \" \" + \"h-100\",\n          children: [/*#__PURE__*/_jsx(\"h5\", {\n            className: \"jsx-1023167557\" + \" \" + \"font-weight-bold text-secondary mb-3\",\n            children: \"Change PIN\"\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            className: \"jsx-1023167557\" + \" \" + \"text-muted\",\n            children: [\"Enter your current 6 digits Zwallet PIN below to \", /*#__PURE__*/_jsx(\"br\", {\n              className: \"jsx-1023167557\"\n            }), \"continue to the next steps.\"]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"jsx-1023167557\" + \" \" + \"my-auto\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"jsx-1023167557\" + \" \" + \"row d-flex justify-content-center text-center\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"jsx-1023167557\" + \" \" + \"col-md-8\",\n                children: /*#__PURE__*/_jsx(\"form\", {\n                  className: \"jsx-1023167557\",\n                  children: /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"jsx-1023167557\" + \" \" + \"px-5\",\n                    children: [/*#__PURE__*/_jsx(\"div\", {\n                      className: \"jsx-1023167557\" + \" \" + \"pt-4 input-wrapper\",\n                      children: /*#__PURE__*/_jsx(PinInput, {\n                        length: 6,\n                        focus: true,\n                        secret: true,\n                        initialValue: \"\",\n                        inputStyle: {\n                          border: \"1px solid rgba(169, 169, 169, 0.6)\",\n                          borderRadius: \"10px\",\n                          width: \"10%\",\n                          minWidth: \"30px\"\n                        },\n                        inputFocusStyle: {\n                          borderColor: \" #6379f4\"\n                        },\n                        type: \"numeric\",\n                        onChange: value => setLoginPin(value)\n                      })\n                    }), /*#__PURE__*/_jsx(\"div\", {\n                      className: \"jsx-1023167557\" + \" \" + \"pt-5\",\n                      children: /*#__PURE__*/_jsx(\"button\", {\n                        onClick: handleLoginPin,\n                        disabled: loginPin.length < 6,\n                        type: \"submit\",\n                        className: \"jsx-1023167557\" + \" \" + \"btn btn-block btn-lg radius-12 btn-blue \",\n                        children: \"Continue\"\n                      })\n                    })]\n                  })\n                })\n              })\n            })\n          })]\n        }), \" \"]\n      })\n    }), /*#__PURE__*/_jsx(_JSXStyle, {\n      id: \"1023167557\",\n      children: [\".btn-blue.jsx-1023167557{background-color:#6379f4;color:white;}\", \".btn-blue.jsx-1023167557:hover{background-color:#5265cf;color:white;}\", \".btn-blue.jsx-1023167557:disabled{background-color:#dadada;color:#88888f;}\", \".btn-blue.jsx-1023167557:disabled.jsx-1023167557:hover{background-color:#dadada;color:#88888f;}\", \"input.jsx-1023167557:focus{border-color:blue !important;box-shadow:none !important;outline:0 none !important;}\", \"input-wrapper.jsx-1023167557{width:100%;display:-webkit-box !important;display:-webkit-flex !important;display:-ms-flexbox !important;display:flex !important;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}\"]\n    })]\n  });\n}\n\nexport default CardChangePin;","map":null,"metadata":{},"sourceType":"module"}